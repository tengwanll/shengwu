<!doctype html>
<html lang="en" ng-app="routerApp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>爱默基因后台管理系统</title>
    <script src="//cdn.bootcss.com/jquery/1.8.3/jquery.min.js"></script>
    <script src="{{ asset('/bundles/mirroradm/js/jquery.json.js') }}"></script>
    <script src="{{ asset('/bundles/mirroradm/js/jqPaginator.js') }}"></script>


    <link href="{{ asset('/bundles/mirroradm/css/bootstrap-datepicker.css') }}" rel="stylesheet">
    <link href="{{ asset('/bundles/mirroradm/css/bootstrap.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="{{ asset('/bundles/mirroradm/css/adm.css') }}">
    <script src="{{ asset('/bundles/mirroradm/js/comfirm.js') }}"></script>
    <script src="{{ asset('/bundles/mirroradm/js/admin.js') }}"></script>
    <script src="{{ asset('/bundles/mirroradm/js/admPublic.js') }}"></script>
    <script src="{{ asset('/bundles/mirroradm/js/jquery.json.js') }}"></script>

    {% block javascript %} {% endblock %}
    {% block css %} {% endblock %}
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
<div id="container">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2">
                <div class="adminLogo">

                </div>
                <!-- /.logo -->
            </div>
            <!-- /.col-md-3 -->
            <div class="col-md-10">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="slogan" style="background-image:url({{ asset('/bundles/mirroradm/images/wenzi.png') }});background-color: #E3E3E3">
                            </div>
                            <!-- /.slogan -->
                        </div>
                        <!-- /.col-md-8 -->
                        <div class="col-md-4">
                            <div class="container-fluid adminUser">
                                <div class="row">
                                    <div class="col-md-6 text-center userBorder">
                                        <div class="adminPhoto">
                                            {% if app.session.get('photo') %}
                                            <img width="80px" height="80px" src="{{app.session.get('photo')}}" alt="">
                                            {% else %}
                                            <img width="80px" height="80px" src="{{ asset('/bundles/mirroradm/images/touxiang.png') }}" alt="">
                                            {% endif %}
                                        </div>
                                        <!-- /.adminPhoto -->
                                        <div class="adminUserName">
                                            {{app.session.get('username')}}
                                        </div>
                                        <!-- /.adminUserName -->
                                    </div>
                                    <!-- /.col-md-6 -->
                                    <div class="col-md-3 text-center"><a href="/adm/user/edit " class="setCenter"><img src="{{ asset('/bundles/mirroradm/images/set.png') }}"
                                                                                                                alt=""></a></div>
                                    <!-- /.col-md-3 -->
                                    <div class="col-md-3 text-center"><a href="javascript:void(0); " class="outUser"><img src="{{ asset('/bundles/mirroradm/images/outUser.png') }}"
                                                                                                              alt=""></a></div>
                                    <!-- /.col-md-3 -->
                                </div>
                                <!-- /.row -->
                            </div>
                            <!-- /.container-fluid -->
                        </div>
                        <!-- /.col-md-4 -->
                    </div>
                    <!-- /.row -->
                </div>
                <!-- /.container-fluid -->
            </div>
            <!-- /.col-md-9 -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container -->
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2">
                <div class="adminLeftNav">
                    <ul>
                        {% block leftNav %}
                        <li><a href="/adm/user" class="users">用户管理</a></li>
                        <li><a href="/adm/order" class="order">订单管理<sup id="num"></sup></a></li>
                        <li><a href="/adm/goods" class="goods">商品管理</a></li>
                        <li><a href="/adm/sort" class="sort">分类管理</a></li>
                        <li><a href="/adm/car" class="car">购物车</a></li>
                        <li><a href="/adm/biology" class="biology">微生物</a></li>
                        {% endblock %}
                    </ul>
                </div>
                <!-- /.adminLeftNav -->
            </div>
            <!-- /.col-md-2 -->
            <div class="col-md-10 content">
                {% block content %}
                    <div class="container-fluid filtrateTab">
                        <div class="row">
                            <div class="col-md-12">
                                {% block typeTabTit %} {% endblock %}
                            </div>
                            <!-- /.col-md-12 -->
                            <div class="col-md-12">
                                <div class="filtrate">
                                    {% block typeForm %} {% endblock %}
                                </div>
                                <!-- /.filtrate -->
                            </div>
                            <!-- /.col-md-8 -->
                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /.container-fluid -->
                <div class="container-fluid">
                    <table class="table table-condensed text-center">
                        <thead>
                        {% block thead %} {% endblock %}
                        </thead>
                        <tbody>
                        {% block tbody %} {% endblock %}
                        </tbody>

                    </table>

                    {% block page %} {% endblock %}
                </div>
                <!-- /.container-fluid -->
                {% endblock %}
            </div>
            <!-- /.col-md-10 -->
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 text-center copyright">
                        <p>公司名称：爱默基因（厦门）生物科技有限公司</p>
                    </div>
                    <!-- /.col-md-12 text-center -->
                </div>
                <!-- /.row -->
            </div>
            <!-- /.container-fluid -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container-fluid -->
    <script>
        $(function(){
            ajaxAction("get",'/api/order/number',"",true,function(data,textStatus){
                if(data.number>0){
                    $('#num').html(data.number);
                }
            },function(errno,errmsg){
                zdalert('系统提示',errmsg);
            });
            $('.outUser').click(function(){
                ajaxAction("post",'/api/user/logout',"",true,function(data,textStatus){
                    location.href='/adm/login/index';
                },function(errno,errmsg){
                    zdalert('系统提示',errmsg);
                });
            });
        });
        var ws = new WebSocket('ws://120.27.5.26:9501?userId='+{{ app.session.get('userId') }} );
        setInterval(function () {
            var msg={};
            msg.event='heart';
            msg.msg='keep_heart';
            ws.send($.toJSON(msg));
        },150000);//定时器每150秒发一条消息维持心跳
        ws.onopen = function(event) {
            // 发送消息

        };

        // 监听消息
        ws.onmessage = function(event) {
            zdalert('系统提示',event.data);
        };
        ws.onclose = function(event) {
            console.log('Client has closed.\n', event);
        };
    </script>
    {% block otherJs %}

    {% endblock %}
</div>
</body>
</html>
